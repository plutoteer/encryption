# 训练图表监控功能

## 功能概述

本功能为MNIST多方同态加密系统添加了实时训练进度监控，可以实时查看训练过程中的损失值和准确率变化。

## 功能特性

- 📊 **实时折线图**: 显示训练轮次与损失值、准确率的关系
- 🔄 **自动刷新**: 支持自动刷新训练数据（每5秒）
- 📈 **双Y轴显示**: 左侧显示损失值，右侧显示准确率百分比
- 📋 **数据表格**: 详细的训练数据表格展示
- 🎯 **状态监控**: 实时显示训练状态和最新轮次信息

## 使用方法

### 1. 启动后端服务

首先启动MNIST CNN训练程序：

```bash
cd MNIST_CNN/cmd/ctCNN
go run main.go
```

后端会自动启动HTTP服务器在端口8080，提供以下API：
- `GET /api/training/history` - 获取训练历史数据
- `GET /api/training/status` - 获取训练状态

### 2. 安装前端依赖

```bash
cd MPHEDevFrontEnd/ParticipantFrontEnd/encryption
npm install
```

### 3. 启动前端服务

```bash
npm run serve
```

### 4. 访问训练图表

在浏览器中访问：`http://localhost:8080/training-chart`

或者通过导航栏的"训练图表"链接访问。

## 页面功能

### 控制按钮
- **刷新数据**: 手动刷新训练数据
- **开始/停止自动刷新**: 切换自动刷新模式（每5秒刷新一次）

### 状态信息
- 训练状态（空闲/训练中/已完成）
- 总训练轮数
- 最新轮次的损失值和准确率

### 图表显示
- 横坐标：训练轮次
- 左Y轴：损失值（红色线）
- 右Y轴：准确率百分比（蓝色线）

### 数据表格
显示每轮训练的详细信息：
- 轮次
- 损失值
- 准确率
- 学习率
- 用时

## 技术实现

### 后端
- 使用全局变量存储训练历史数据
- 线程安全的读写操作
- RESTful API设计
- CORS支持

### 前端
- Vue 3 + Composition API
- Chart.js 图表库
- Axios HTTP客户端
- 响应式设计

## 数据格式

### 训练历史数据
```json
{
  "success": true,
  "data": [
    {
      "epoch": 1,
      "loss": 2.345678,
      "accuracy": 45.67,
      "learningRate": 0.100000,
      "epochTime": "1m23s"
    }
  ],
  "total": 15
}
```

### 训练状态
```json
{
  "success": true,
  "status": "completed",
  "totalEpochs": 15,
  "lastEpoch": {
    "epoch": 15,
    "loss": 0.123456,
    "accuracy": 89.12
  }
}
```

## 注意事项

1. 确保后端训练程序正在运行
2. 前端需要能够访问 `http://localhost:8080`
3. 如果训练还未开始，图表会显示"暂无训练数据"
4. 自动刷新功能会消耗一定的网络资源，建议在需要时开启

## 故障排除

### 无法获取数据
- 检查后端服务是否正常运行
- 确认端口8080没有被其他程序占用
- 检查浏览器控制台是否有CORS错误

### 图表不显示
- 确认已安装Chart.js依赖
- 检查浏览器控制台是否有JavaScript错误
- 确认训练数据格式正确

### 自动刷新不工作
- 检查网络连接
- 确认后端API响应正常
- 查看浏览器控制台错误信息 