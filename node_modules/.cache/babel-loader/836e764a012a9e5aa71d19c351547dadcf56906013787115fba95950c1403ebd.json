{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = {\n  style: {\n    \"padding\": \"24px\",\n    \"max-width\": \"700px\",\n    \"margin\": \"auto\"\n  }\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  key: 0\n};\nconst _hoisted_4 = {\n  key: 1\n};\nconst _hoisted_5 = {\n  style: {\n    \"margin-top\": \"16px\"\n  }\n};\nconst _hoisted_6 = {\n  style: {\n    \"margin-top\": \"16px\"\n  }\n};\nconst _hoisted_7 = {\n  key: 0\n};\nconst _hoisted_8 = {\n  style: {\n    \"margin-top\": \"16px\"\n  }\n};\nconst _hoisted_9 = {\n  key: 0\n};\nconst _hoisted_10 = {\n  style: {\n    \"margin-top\": \"16px\"\n  }\n};\nconst _hoisted_11 = {\n  key: 0\n};\nexport function render(_ctx, _cache) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[16] || (_cache[16] = _createElementVNode(\"h2\", null, \"参与方 WebSocket 连接\", -1 /* CACHED */)), _createElementVNode(\"div\", null, [_cache[9] || (_cache[9] = _createElementVNode(\"span\", null, \"WebSocket 端口: 8061 (已固定)\", -1 /* CACHED */)), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.connectWS && _ctx.connectWS(...args))\n  }, \"连接\"), _ctx.wsStatus ? (_openBlock(), _createElementBlock(\"span\", _hoisted_2, \"(\" + _toDisplayString(_ctx.wsStatus) + \")\", 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _ctx.ipPush ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_cache[10] || (_cache[10] = _createElementVNode(\"h3\", null, \"本机IP推送\", -1 /* CACHED */)), _createElementVNode(\"div\", null, \"IP: \" + _toDisplayString(_ctx.ipPush.ip) + \" | 端口: \" + _toDisplayString(_ctx.ipPush.port), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _ctx.keygenProgress ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_cache[11] || (_cache[11] = _createElementVNode(\"h3\", null, \"密钥生成进度\", -1 /* CACHED */)), _createElementVNode(\"div\", null, \"步骤: \" + _toDisplayString(_ctx.keygenProgress.step), 1 /* TEXT */), _createElementVNode(\"div\", null, \"状态: \" + _toDisplayString(_ctx.keygenProgress.status), 1 /* TEXT */), _createElementVNode(\"div\", null, \"说明: \" + _toDisplayString(_ctx.keygenProgress.message), 1 /* TEXT */), _createElementVNode(\"div\", null, \"时间: \" + _toDisplayString(_ctx.keygenProgress.timestamp), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_5, [_cache[12] || (_cache[12] = _createElementVNode(\"h3\", null, \"发送协调器IP\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.coordinatorIP = $event),\n    placeholder: \"输入协调器IP\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.coordinatorIP]]), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => _ctx.sendCoordinatorIP && _ctx.sendCoordinatorIP(...args))\n  }, \"发送\")]), _createElementVNode(\"div\", _hoisted_6, [_cache[13] || (_cache[13] = _createElementVNode(\"h3\", null, \"自身状态\", -1 /* CACHED */)), _createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => _ctx.fetchSelfStatus && _ctx.fetchSelfStatus(...args))\n  }, \"查询\"), _ctx.selfStatus ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, [_createElementVNode(\"pre\", null, _toDisplayString(_ctx.selfStatus), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_8, [_cache[14] || (_cache[14] = _createElementVNode(\"h3\", null, \"协同解密/刷新请求\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => _ctx.ciphertext = $event),\n    placeholder: \"密文 ciphertext\",\n    style: {\n      \"width\": \"300px\"\n    }\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.ciphertext]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => _ctx.targetParticipants = $event),\n    placeholder: \"目标参与方ID,逗号分隔\",\n    style: {\n      \"width\": \"180px\"\n    }\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.targetParticipants]]), _createElementVNode(\"button\", {\n    onClick: _cache[6] || (_cache[6] = (...args) => _ctx.collaborativeDecrypt && _ctx.collaborativeDecrypt(...args))\n  }, \"协同解密\"), _createElementVNode(\"button\", {\n    onClick: _cache[7] || (_cache[7] = (...args) => _ctx.collaborativeRefresh && _ctx.collaborativeRefresh(...args))\n  }, \"协同刷新\"), _ctx.collabResp ? (_openBlock(), _createElementBlock(\"div\", _hoisted_9, [_createElementVNode(\"pre\", null, _toDisplayString(_ctx.collabResp), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_10, [_cache[15] || (_cache[15] = _createElementVNode(\"h3\", null, \"在线状态查询\", -1 /* CACHED */)), _createElementVNode(\"button\", {\n    onClick: _cache[8] || (_cache[8] = (...args) => _ctx.fetchOnlineStatus && _ctx.fetchOnlineStatus(...args))\n  }, \"查询\"), _ctx.onlineStatus ? (_openBlock(), _createElementBlock(\"div\", _hoisted_11, [_createElementVNode(\"pre\", null, _toDisplayString(_ctx.onlineStatus), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"names":["style","_createElementBlock","_hoisted_1","_createElementVNode","onClick","_cache","args","_ctx","connectWS","wsStatus","_hoisted_2","_toDisplayString","ipPush","_hoisted_3","ip","port","keygenProgress","_hoisted_4","step","status","message","timestamp","_hoisted_5","coordinatorIP","$event","placeholder","sendCoordinatorIP","_hoisted_6","fetchSelfStatus","selfStatus","_hoisted_7","_hoisted_8","ciphertext","targetParticipants","collaborativeDecrypt","collaborativeRefresh","collabResp","_hoisted_9","_hoisted_10","fetchOnlineStatus","onlineStatus","_hoisted_11"],"sources":["D:\\down\\MPHEDEV\\encryption_par\\src\\App.vue"],"sourcesContent":["<template>\n  <div style=\"padding: 24px; max-width: 700px; margin: auto;\">\n    <h2>参与方 WebSocket 连接</h2>\n    <div>\n      <span>WebSocket 端口: 8061 (已固定)</span>\n      <button @click=\"connectWS\">连接</button>\n      <span v-if=\"wsStatus\">({{ wsStatus }})</span>\n    </div>\n    <div v-if=\"ipPush\">\n      <h3>本机IP推送</h3>\n      <div>IP: {{ ipPush.ip }} | 端口: {{ ipPush.port }}</div>\n    </div>\n    <div v-if=\"keygenProgress\">\n      <h3>密钥生成进度</h3>\n      <div>步骤: {{ keygenProgress.step }}</div>\n      <div>状态: {{ keygenProgress.status }}</div>\n      <div>说明: {{ keygenProgress.message }}</div>\n      <div>时间: {{ keygenProgress.timestamp }}</div>\n    </div>\n    <div style=\"margin-top: 16px;\">\n      <h3>发送协调器IP</h3>\n      <input v-model=\"coordinatorIP\" placeholder=\"输入协调器IP\" />\n      <button @click=\"sendCoordinatorIP\">发送</button>\n    </div>\n    <div style=\"margin-top: 16px;\">\n      <h3>自身状态</h3>\n      <button @click=\"fetchSelfStatus\">查询</button>\n      <div v-if=\"selfStatus\">\n        <pre>{{ selfStatus }}</pre>\n      </div>\n    </div>\n    <div style=\"margin-top: 16px;\">\n      <h3>协同解密/刷新请求</h3>\n      <input v-model=\"ciphertext\" placeholder=\"密文 ciphertext\" style=\"width: 300px;\" />\n      <input v-model=\"targetParticipants\" placeholder=\"目标参与方ID,逗号分隔\" style=\"width: 180px;\" />\n      <button @click=\"collaborativeDecrypt\">协同解密</button>\n      <button @click=\"collaborativeRefresh\">协同刷新</button>\n      <div v-if=\"collabResp\">\n        <pre>{{ collabResp }}</pre>\n      </div>\n    </div>\n    <div style=\"margin-top: 16px;\">\n      <h3>在线状态查询</h3>\n      <button @click=\"fetchOnlineStatus\">查询</button>\n      <div v-if=\"onlineStatus\">\n        <pre>{{ onlineStatus }}</pre>\n      </div>\n    </div>\n  </div>\n</template>\n<script setup>\nimport { ref } from 'vue'\nimport {\n  getSelfStatus,\n  getOnlineStatus,\n  collaborativeDecrypt,\n  collaborativeRefresh\n} from './api/participant'\n\nconst ws = ref(null)\nconst wsStatus = ref('未连接')\nconst ipPush = ref(null)\nconst keygenProgress = ref(null)\nconst coordinatorIP = ref('')\n\nfunction connectWS() {\n  if (ws.value) ws.value.close()\n  ws.value = new WebSocket('ws://localhost:8061/api/participant/ws')\n  ws.value.onopen = () => { wsStatus.value = '已连接' }\n  ws.value.onclose = () => { wsStatus.value = '已断开' }\n  ws.value.onerror = () => { wsStatus.value = '连接错误' }\n  ws.value.onmessage = (event) => {\n    const msg = JSON.parse(event.data)\n    if (msg.type === 'ip') {\n      ipPush.value = msg\n    } else if (msg.type === 'keygen_progress') {\n      keygenProgress.value = msg\n    }\n  }\n}\n\nfunction sendCoordinatorIP() {\n  if (ws.value && ws.value.readyState === 1) {\n    ws.value.send(JSON.stringify({\n      type: 'coordinator_ip',\n      coordinator_ip: coordinatorIP.value\n    }))\n  }\n}\n\n// 自身状态\nconst selfStatus = ref('')\nasync function fetchSelfStatus() {\n  const res = await getSelfStatus()\n  selfStatus.value = JSON.stringify(res.data, null, 2)\n}\n\n// 协同解密/刷新\nconst ciphertext = ref('')\nconst targetParticipants = ref('')\nconst collabResp = ref('')\nasync function collaborativeDecrypt() {\n  const ids = targetParticipants.value.split(',').map(s => parseInt(s)).filter(Boolean)\n  const res = await collaborativeDecryptApi({\n    ciphertext: ciphertext.value,\n    target_participants: ids\n  })\n  collabResp.value = JSON.stringify(res.data, null, 2)\n}\nasync function collaborativeRefresh() {\n  const ids = targetParticipants.value.split(',').map(s => parseInt(s)).filter(Boolean)\n  const res = await collaborativeRefreshApi({\n    ciphertext: ciphertext.value,\n    target_participants: ids\n  })\n  collabResp.value = JSON.stringify(res.data, null, 2)\n}\n// 兼容导入\nconst collaborativeDecryptApi = collaborativeDecrypt\nconst collaborativeRefreshApi = collaborativeRefresh\n\n// 在线状态\nconst onlineStatus = ref('')\nasync function fetchOnlineStatus() {\n  const res = await getOnlineStatus()\n  onlineStatus.value = JSON.stringify(res.data, null, 2)\n}\n</script> "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}