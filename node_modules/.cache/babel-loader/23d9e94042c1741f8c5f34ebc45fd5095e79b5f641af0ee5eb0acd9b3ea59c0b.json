{"ast":null,"code":"import { toDisplayString as _toDisplayString, createElementVNode as _createElementVNode, vModelCheckbox as _vModelCheckbox, withDirectives as _withDirectives, createTextVNode as _createTextVNode, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  class: \"backend-output\"\n};\nconst _hoisted_2 = {\n  class: \"header\"\n};\nconst _hoisted_3 = {\n  class: \"controls\"\n};\nconst _hoisted_4 = [\"disabled\"];\nconst _hoisted_5 = {\n  class: \"output-container\"\n};\nconst _hoisted_6 = {\n  key: 0,\n  class: \"loading\"\n};\nconst _hoisted_7 = {\n  key: 1,\n  class: \"no-output\"\n};\nconst _hoisted_8 = {\n  key: 2,\n  class: \"output-content\"\n};\nconst _hoisted_9 = {\n  class: \"output-header\"\n};\nconst _hoisted_10 = {\n  class: \"timestamp\"\n};\nconst _hoisted_11 = {\n  class: \"output-count\"\n};\nconst _hoisted_12 = {\n  class: \"output-text\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"div\", _hoisted_2, [_createElementVNode(\"h3\", null, _toDisplayString($setup.layerTitle), 1 /* TEXT */), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"button\", {\n    onClick: $setup.refreshOutput,\n    disabled: $setup.isLoading\n  }, _toDisplayString($setup.isLoading ? '刷新中...' : '刷新输出'), 9 /* TEXT, PROPS */, _hoisted_4), _createElementVNode(\"button\", {\n    onClick: $setup.clearOutput\n  }, \"清空\"), _createElementVNode(\"label\", null, [_withDirectives(_createElementVNode(\"input\", {\n    type: \"checkbox\",\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.autoRefresh = $event)\n  }, null, 512 /* NEED_PATCH */), [[_vModelCheckbox, $setup.autoRefresh]]), _cache[1] || (_cache[1] = _createTextVNode(\" 自动刷新 (5秒) \"))])])]), _createElementVNode(\"div\", _hoisted_5, [$setup.isLoading && !$setup.output ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, \" 正在获取后端输出... \")) : !$setup.output ? (_openBlock(), _createElementBlock(\"div\", _hoisted_7, \" 暂无输出，点击\\\"刷新输出\\\"按钮获取最新信息 \")) : (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createElementVNode(\"div\", _hoisted_9, [_createElementVNode(\"span\", _hoisted_10, \"最后更新: \" + _toDisplayString($setup.lastUpdateTime), 1 /* TEXT */), _createElementVNode(\"span\", _hoisted_11, \"输出行数: \" + _toDisplayString($setup.outputLines), 1 /* TEXT */)]), _createElementVNode(\"pre\", _hoisted_12, _toDisplayString($setup.output), 1 /* TEXT */)]))])]);\n}","map":{"version":3,"names":["class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_toDisplayString","$setup","layerTitle","_hoisted_3","onClick","refreshOutput","disabled","isLoading","_hoisted_4","clearOutput","type","autoRefresh","$event","_hoisted_5","output","_hoisted_6","_hoisted_7","_hoisted_8","_hoisted_9","_hoisted_10","lastUpdateTime","_hoisted_11","outputLines","_hoisted_12"],"sources":["E:\\大三下学习资料\\项目实训\\MPHEDevCombine\\MPHEDevFrontEnd\\ParticipantFrontEnd\\encryption\\src\\components\\BackendOutput.vue"],"sourcesContent":["<template>\n  <div class=\"backend-output\">\n    <div class=\"header\">\n      <h3>{{ layerTitle }}</h3>\n      <div class=\"controls\">\n        <button @click=\"refreshOutput\" :disabled=\"isLoading\">\n          {{ isLoading ? '刷新中...' : '刷新输出' }}\n        </button>\n        <button @click=\"clearOutput\">清空</button>\n        <label>\n          <input type=\"checkbox\" v-model=\"autoRefresh\" />\n          自动刷新 (5秒)\n        </label>\n      </div>\n    </div>\n    \n    <div class=\"output-container\">\n      <div v-if=\"isLoading && !output\" class=\"loading\">\n        正在获取后端输出...\n      </div>\n      \n      <div v-else-if=\"!output\" class=\"no-output\">\n        暂无输出，点击\"刷新输出\"按钮获取最新信息\n      </div>\n      \n      <div v-else class=\"output-content\">\n        <div class=\"output-header\">\n          <span class=\"timestamp\">最后更新: {{ lastUpdateTime }}</span>\n          <span class=\"output-count\">输出行数: {{ outputLines }}</span>\n        </div>\n        <pre class=\"output-text\">{{ output }}</pre>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport { ref, onMounted, onUnmounted, computed, watch } from 'vue'\nimport { getBackendOutput } from '../api/participant'\n\nconst props = defineProps({\n  participantId: {\n    type: Number,\n    required: true\n  }\n})\n\nconst output = ref('')\nconst isLoading = ref(false)\nconst autoRefresh = ref(false)\nconst lastUpdateTime = ref('')\nconst refreshInterval = ref(null)\n\n// 根据参与方ID计算层标题\nconst layerTitle = computed(() => {\n  switch (props.participantId) {\n    case 1:\n      return '输入层 (Input Layer) - 参与方 #1'\n    case 2:\n      return '隐藏层 (Hidden Layer) - 参与方 #2'\n    case 3:\n      return '输出层 (Output Layer) - 参与方 #3'\n    default:\n      return `参与方 #${props.participantId}`\n  }\n})\n\n// 计算输出行数\nconst outputLines = computed(() => {\n  if (!output.value) return 0\n  return output.value.split('\\n').length\n})\n\n// 刷新输出\nasync function refreshOutput() {\n  if (isLoading.value) return\n  \n  isLoading.value = true\n  try {\n    console.log('🔍 BackendOutput: 开始获取后端输出...')\n    console.log('🔍 BackendOutput: 当前环境变量:', {\n      BACKEND_PORT: window.BACKEND_PORT,\n      FRONTEND_PORT: window.FRONTEND_PORT,\n      COORDINATOR_PORT: window.COORDINATOR_PORT\n    })\n    console.log('🔍 BackendOutput: 当前URL:', window.location.href)\n    console.log('🔍 BackendOutput: 当前端口:', window.location.port)\n    \n    const response = await getBackendOutput()\n    console.log('🔍 BackendOutput: 后端响应:', response)\n    \n    // 简化响应处理逻辑\n    if (response && response.data) {\n      // 直接显示后端返回的输出内容\n      if (typeof response.data.output === 'string') {\n        output.value = response.data.output\n      } else if (typeof response.data === 'string') {\n        output.value = response.data\n      } else {\n        // 如果是对象，转换为JSON字符串显示\n        output.value = JSON.stringify(response.data, null, 2)\n      }\n      console.log('🔍 BackendOutput: 设置输出内容:', output.value)\n    } else {\n      output.value = '后端返回了空响应'\n    }\n    lastUpdateTime.value = new Date().toLocaleString('zh-CN')\n  } catch (error) {\n    console.error('🔍 BackendOutput: 获取后端输出失败:', error)\n    console.error('🔍 BackendOutput: 错误详情:', {\n      name: error.name,\n      message: error.message,\n      stack: error.stack,\n      config: error.config\n    })\n    \n    // 简化错误处理\n    if (error.response) {\n      // 服务器返回了错误状态码\n      output.value = `服务器错误 (${error.response.status}): ${error.response.data?.error || error.response.statusText}`\n    } else if (error.request) {\n      // 请求已发出但没有收到响应\n      output.value = `网络错误: 无法连接到后端服务器`\n    } else {\n      // 其他错误\n      output.value = `请求错误: ${error.message}`\n    }\n    lastUpdateTime.value = new Date().toLocaleString('zh-CN')\n  } finally {\n    isLoading.value = false\n  }\n}\n\n// 清空输出\nfunction clearOutput() {\n  output.value = ''\n  lastUpdateTime.value = ''\n}\n\n// 启动自动刷新\nfunction startAutoRefresh() {\n  if (refreshInterval.value) {\n    clearInterval(refreshInterval.value)\n  }\n  refreshInterval.value = setInterval(refreshOutput, 5000)\n}\n\n// 停止自动刷新\nfunction stopAutoRefresh() {\n  if (refreshInterval.value) {\n    clearInterval(refreshInterval.value)\n    refreshInterval.value = null\n  }\n}\n\n// 监听自动刷新开关\nwatch(autoRefresh, (newValue) => {\n  if (newValue) {\n    startAutoRefresh()\n  } else {\n    stopAutoRefresh()\n  }\n})\n\n// 组件挂载时获取一次输出\nonMounted(() => {\n  refreshOutput()\n})\n\n// 组件卸载时清理定时器\nonUnmounted(() => {\n  if (refreshInterval.value) {\n    clearInterval(refreshInterval.value)\n  }\n})\n</script>\n\n<style scoped>\n.backend-output {\n  background: rgba(255,255,255,0.95);\n  backdrop-filter: blur(25px);\n  border: 1px solid rgba(255,255,255,0.3);\n  border-radius: 25px;\n  padding: 30px;\n  margin-bottom: 20px;\n  box-shadow: 0 15px 50px rgba(0,0,0,0.12);\n  transition: all 0.4s cubic-bezier(0.4,0,0.2,1);\n  position: relative;\n  overflow: hidden;\n}\n\n.header {\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  margin-bottom: 25px;\n  padding-bottom: 20px;\n  border-bottom: 1px solid rgba(102,126,234,0.1);\n}\n\n.header h3 {\n  margin: 0;\n  color: #1e293b;\n  font-size: 1.4rem;\n  font-weight: 800;\n  letter-spacing: -0.01em;\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  -webkit-background-clip: text;\n  -webkit-text-fill-color: transparent;\n  background-clip: text;\n}\n\n.controls {\n  display: flex;\n  gap: 15px;\n  align-items: center;\n  flex-wrap: wrap;\n}\n\n.controls button {\n  position: relative;\n  display: flex;\n  align-items: center;\n  gap: 8px;\n  padding: 12px 24px;\n  border: none;\n  border-radius: 18px;\n  font-size: 0.95rem;\n  font-weight: 700;\n  cursor: pointer;\n  transition: all 0.3s cubic-bezier(0.4,0,0.2,1);\n  overflow: hidden;\n  backdrop-filter: blur(10px);\n  box-shadow: 0 8px 25px rgba(102,126,234,0.08);\n}\n.controls button::before {\n  content: '';\n  position: absolute;\n  top: 0;\n  left: -100%;\n  width: 100%;\n  height: 100%;\n  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.25), transparent);\n  transition: left 0.6s;\n}\n.controls button:hover::before {\n  left: 100%;\n}\n.controls button:first-child {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  color: white;\n}\n.controls button:first-child:hover:not(:disabled) {\n  transform: translateY(-3px) scale(1.05);\n  box-shadow: 0 15px 35px rgba(102,126,234,0.15);\n}\n.controls button:nth-child(2) {\n  background: linear-gradient(135deg, #ef4444 0%, #dc2626 100%);\n  color: white;\n}\n.controls button:nth-child(2):hover {\n  transform: translateY(-3px) scale(1.05);\n  box-shadow: 0 15px 35px rgba(239,68,68,0.15);\n}\n.controls button:disabled {\n  background: linear-gradient(135deg, #9ca3af 0%, #6b7280 100%);\n  color: rgba(255,255,255,0.7);\n  cursor: not-allowed;\n  transform: none;\n  box-shadow: 0 4px 15px rgba(156,163,175,0.3);\n}\n.controls label {\n  display: flex;\n  align-items: center;\n  gap: 10px;\n  font-size: 0.9rem;\n  color: #374151;\n  font-weight: 600;\n  padding: 12px 20px;\n  background: rgba(255,255,255,0.8);\n  border: 1px solid rgba(102,126,234,0.15);\n  border-radius: 18px;\n  backdrop-filter: blur(10px);\n  transition: all 0.3s cubic-bezier(0.4,0,0.2,1);\n}\n.controls label:hover {\n  background: rgba(255,255,255,1);\n  border-color: rgba(102,126,234,0.4);\n  transform: translateY(-2px);\n  box-shadow: 0 8px 25px rgba(102,126,234,0.1);\n}\n.controls input[type=\"checkbox\"] {\n  width: 18px;\n  height: 18px;\n  accent-color: #667eea;\n  cursor: pointer;\n}\n\n.output-container {\n  min-height: 250px;\n  background: rgba(255,255,255,0.8);\n  border-radius: 20px;\n  border: 1px solid rgba(102,126,234,0.1);\n  overflow: hidden;\n  transition: all 0.3s cubic-bezier(0.4,0,0.2,1);\n}\n.output-container:hover {\n  background: rgba(255,255,255,1);\n  border-color: rgba(102,126,234,0.2);\n  box-shadow: 0 8px 25px rgba(102,126,234,0.05);\n}\n.loading, .no-output {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  height: 250px;\n  color: #6b7280;\n  font-style: italic;\n  font-size: 1.1rem;\n  font-weight: 500;\n  background: linear-gradient(135deg, rgba(102,126,234,0.05) 0%, rgba(118,75,162,0.05) 100%);\n}\n.output-content {\n  background: rgba(255,255,255,1);\n  border-radius: 20px;\n  overflow: hidden;\n  box-shadow: 0 4px 20px rgba(0,0,0,0.05);\n}\n.output-header {\n  display: flex;\n  justify-content: space-between;\n  padding: 15px 20px;\n  background: linear-gradient(135deg, rgba(102,126,234,0.1) 0%, rgba(118,75,162,0.1) 100%);\n  border-bottom: 1px solid rgba(102,126,234,0.1);\n  font-size: 0.85rem;\n  color: #374151;\n  font-weight: 600;\n}\n.output-text {\n  margin: 0;\n  padding: 20px;\n  background: linear-gradient(135deg, #1e293b 0%, #334155 100%);\n  color: #e2e8f0;\n  font-family: 'Consolas', 'Monaco', 'Courier New', monospace;\n  font-size: 0.9rem;\n  line-height: 1.6;\n  white-space: pre-wrap;\n  word-wrap: break-word;\n  max-height: 400px;\n  overflow-y: auto;\n  border-radius: 0 0 20px 20px;\n}\n.output-text::-webkit-scrollbar {\n  width: 8px;\n}\n.output-text::-webkit-scrollbar-track {\n  background: rgba(255,255,255,0.5);\n  border-radius: 4px;\n}\n.output-text::-webkit-scrollbar-thumb {\n  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n  border-radius: 4px;\n}\n.output-text::-webkit-scrollbar-thumb:hover {\n  background: linear-gradient(135deg, #5a67d8 0%, #6b46c1 100%);\n}\n\n@media (max-width: 768px) {\n  .backend-output {\n    padding: 20px;\n  }\n  .header {\n    flex-direction: column;\n    align-items: flex-start;\n    gap: 15px;\n  }\n  .controls {\n    width: 100%;\n    justify-content: space-between;\n  }\n  .controls button {\n    padding: 10px 18px;\n    font-size: 0.85rem;\n  }\n  .controls label {\n    padding: 10px 15px;\n    font-size: 0.8rem;\n  }\n  .output-header {\n    flex-direction: column;\n    gap: 8px;\n    align-items: flex-start;\n  }\n}\n</style> "],"mappings":";;EACOA,KAAK,EAAC;AAAgB;;EACpBA,KAAK,EAAC;AAAQ;;EAEZA,KAAK,EAAC;AAAU;;;EAYlBA,KAAK,EAAC;AAAkB;;;EACMA,KAAK,EAAC;;;;EAIdA,KAAK,EAAC;;;;EAInBA,KAAK,EAAC;;;EACXA,KAAK,EAAC;AAAe;;EAClBA,KAAK,EAAC;AAAW;;EACjBA,KAAK,EAAC;AAAc;;EAEvBA,KAAK,EAAC;AAAa;;uBA7B9BC,mBAAA,CAgCM,OAhCNC,UAgCM,GA/BJC,mBAAA,CAYM,OAZNC,UAYM,GAXJD,mBAAA,CAAyB,YAAAE,gBAAA,CAAlBC,MAAA,CAAAC,UAAU,kBACjBJ,mBAAA,CASM,OATNK,UASM,GARJL,mBAAA,CAES;IAFAM,OAAK,EAAEH,MAAA,CAAAI,aAAa;IAAGC,QAAQ,EAAEL,MAAA,CAAAM;sBACrCN,MAAA,CAAAM,SAAS,4CAAAC,UAAA,GAEdV,mBAAA,CAAwC;IAA/BM,OAAK,EAAEH,MAAA,CAAAQ;EAAW,GAAE,IAAE,GAC/BX,mBAAA,CAGQ,gB,gBAFNA,mBAAA,CAA+C;IAAxCY,IAAI,EAAC,UAAU;+DAAUT,MAAA,CAAAU,WAAW,GAAAC,MAAA;qDAAXX,MAAA,CAAAU,WAAW,E,8CAAI,aAEjD,G,OAIJb,mBAAA,CAgBM,OAhBNe,UAgBM,GAfOZ,MAAA,CAAAM,SAAS,KAAKN,MAAA,CAAAa,MAAM,I,cAA/BlB,mBAAA,CAEM,OAFNmB,UAEM,EAF2C,eAEjD,K,CAEiBd,MAAA,CAAAa,MAAM,I,cAAvBlB,mBAAA,CAEM,OAFNoB,UAEM,EAFqC,2BAE3C,M,cAEApB,mBAAA,CAMM,OANNqB,UAMM,GALJnB,mBAAA,CAGM,OAHNoB,UAGM,GAFJpB,mBAAA,CAAyD,QAAzDqB,WAAyD,EAAjC,QAAM,GAAAnB,gBAAA,CAAGC,MAAA,CAAAmB,cAAc,kBAC/CtB,mBAAA,CAAyD,QAAzDuB,WAAyD,EAA9B,QAAM,GAAArB,gBAAA,CAAGC,MAAA,CAAAqB,WAAW,iB,GAEjDxB,mBAAA,CAA2C,OAA3CyB,WAA2C,EAAAvB,gBAAA,CAAfC,MAAA,CAAAa,MAAM,iB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}