{"ast":null,"code":"import { createElementVNode as _createElementVNode, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode, vModelText as _vModelText, withDirectives as _withDirectives } from \"vue\";\nconst _hoisted_1 = {\n  style: {\n    \"padding\": \"24px\",\n    \"max-width\": \"700px\",\n    \"margin\": \"auto\"\n  }\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  key: 0\n};\nconst _hoisted_4 = {\n  key: 1\n};\nconst _hoisted_5 = {\n  style: {\n    \"margin-top\": \"16px\"\n  }\n};\nconst _hoisted_6 = {\n  key: 0\n};\nconst _hoisted_7 = {\n  style: {\n    \"margin-top\": \"16px\"\n  }\n};\nconst _hoisted_8 = {\n  key: 0\n};\nconst _hoisted_9 = {\n  style: {\n    \"margin-top\": \"16px\"\n  }\n};\nconst _hoisted_10 = {\n  key: 0\n};\nconst _hoisted_11 = {\n  style: {\n    \"margin-top\": \"16px\"\n  }\n};\nconst _hoisted_12 = {\n  key: 0\n};\nexport function render(_ctx, _cache) {\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_cache[16] || (_cache[16] = _createElementVNode(\"h2\", null, \"参与方 WebSocket 连接\", -1 /* CACHED */)), _createElementVNode(\"div\", null, [_cache[9] || (_cache[9] = _createElementVNode(\"span\", null, \"WebSocket 端口: 8061 (已固定)\", -1 /* CACHED */)), _createElementVNode(\"button\", {\n    onClick: _cache[0] || (_cache[0] = (...args) => _ctx.connectWS && _ctx.connectWS(...args))\n  }, \"连接\"), _ctx.wsStatus ? (_openBlock(), _createElementBlock(\"span\", _hoisted_2, \"(\" + _toDisplayString(_ctx.wsStatus) + \")\", 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _ctx.ipPush ? (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_cache[10] || (_cache[10] = _createElementVNode(\"h3\", null, \"本机IP推送\", -1 /* CACHED */)), _createElementVNode(\"div\", null, \"IP: \" + _toDisplayString(_ctx.ipPush.ip) + \" | 端口: \" + _toDisplayString(_ctx.ipPush.port), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _ctx.keygenProgress ? (_openBlock(), _createElementBlock(\"div\", _hoisted_4, [_cache[11] || (_cache[11] = _createElementVNode(\"h3\", null, \"密钥生成进度\", -1 /* CACHED */)), _createElementVNode(\"div\", null, \"步骤: \" + _toDisplayString(_ctx.keygenProgress.step), 1 /* TEXT */), _createElementVNode(\"div\", null, \"状态: \" + _toDisplayString(_ctx.keygenProgress.status), 1 /* TEXT */), _createElementVNode(\"div\", null, \"说明: \" + _toDisplayString(_ctx.keygenProgress.message), 1 /* TEXT */), _createElementVNode(\"div\", null, \"时间: \" + _toDisplayString(_ctx.keygenProgress.timestamp), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true), _createElementVNode(\"div\", _hoisted_5, [_cache[12] || (_cache[12] = _createElementVNode(\"h3\", null, \"输入协调器IP并获取状态\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => _ctx.coordinatorIP = $event),\n    placeholder: \"输入协调器IP\"\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.coordinatorIP]]), _createElementVNode(\"button\", {\n    onClick: _cache[2] || (_cache[2] = (...args) => _ctx.fetchCoordinatorStatus && _ctx.fetchCoordinatorStatus(...args))\n  }, \"获取协调器状态\"), _ctx.coordinatorStatus ? (_openBlock(), _createElementBlock(\"div\", _hoisted_6, [_createElementVNode(\"pre\", null, _toDisplayString(_ctx.coordinatorStatus), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_7, [_cache[13] || (_cache[13] = _createElementVNode(\"h3\", null, \"自身状态\", -1 /* CACHED */)), _createElementVNode(\"button\", {\n    onClick: _cache[3] || (_cache[3] = (...args) => _ctx.fetchSelfStatus && _ctx.fetchSelfStatus(...args))\n  }, \"查询\"), _ctx.selfStatus ? (_openBlock(), _createElementBlock(\"div\", _hoisted_8, [_createElementVNode(\"pre\", null, _toDisplayString(_ctx.selfStatus), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_9, [_cache[14] || (_cache[14] = _createElementVNode(\"h3\", null, \"协同解密/刷新请求\", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => _ctx.ciphertext = $event),\n    placeholder: \"密文 ciphertext\",\n    style: {\n      \"width\": \"300px\"\n    }\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.ciphertext]]), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => _ctx.targetParticipants = $event),\n    placeholder: \"目标参与方ID,逗号分隔\",\n    style: {\n      \"width\": \"180px\"\n    }\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, _ctx.targetParticipants]]), _createElementVNode(\"button\", {\n    onClick: _cache[6] || (_cache[6] = (...args) => _ctx.collaborativeDecrypt && _ctx.collaborativeDecrypt(...args))\n  }, \"协同解密\"), _createElementVNode(\"button\", {\n    onClick: _cache[7] || (_cache[7] = (...args) => _ctx.collaborativeRefresh && _ctx.collaborativeRefresh(...args))\n  }, \"协同刷新\"), _ctx.collabResp ? (_openBlock(), _createElementBlock(\"div\", _hoisted_10, [_createElementVNode(\"pre\", null, _toDisplayString(_ctx.collabResp), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_11, [_cache[15] || (_cache[15] = _createElementVNode(\"h3\", null, \"在线状态查询\", -1 /* CACHED */)), _createElementVNode(\"button\", {\n    onClick: _cache[8] || (_cache[8] = (...args) => _ctx.fetchOnlineStatus && _ctx.fetchOnlineStatus(...args))\n  }, \"查询\"), _ctx.onlineStatus ? (_openBlock(), _createElementBlock(\"div\", _hoisted_12, [_createElementVNode(\"pre\", null, _toDisplayString(_ctx.onlineStatus), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"names":["style","_createElementBlock","_hoisted_1","_createElementVNode","onClick","_cache","args","_ctx","connectWS","wsStatus","_hoisted_2","_toDisplayString","ipPush","_hoisted_3","ip","port","keygenProgress","_hoisted_4","step","status","message","timestamp","_hoisted_5","coordinatorIP","$event","placeholder","fetchCoordinatorStatus","coordinatorStatus","_hoisted_6","_hoisted_7","fetchSelfStatus","selfStatus","_hoisted_8","_hoisted_9","ciphertext","targetParticipants","collaborativeDecrypt","collaborativeRefresh","collabResp","_hoisted_10","_hoisted_11","fetchOnlineStatus","onlineStatus","_hoisted_12"],"sources":["D:\\down\\MPHEDEV\\encryption_par\\src\\App.vue"],"sourcesContent":["<template>\r\n  <div style=\"padding: 24px; max-width: 700px; margin: auto;\">\r\n    <h2>参与方 WebSocket 连接</h2>\r\n    <div>\r\n      <span>WebSocket 端口: 8061 (已固定)</span>\r\n      <button @click=\"connectWS\">连接</button>\r\n      <span v-if=\"wsStatus\">({{ wsStatus }})</span>\r\n    </div>\r\n    <div v-if=\"ipPush\">\r\n      <h3>本机IP推送</h3>\r\n      <div>IP: {{ ipPush.ip }} | 端口: {{ ipPush.port }}</div>\r\n    </div>\r\n    <div v-if=\"keygenProgress\">\r\n      <h3>密钥生成进度</h3>\r\n      <div>步骤: {{ keygenProgress.step }}</div>\r\n      <div>状态: {{ keygenProgress.status }}</div>\r\n      <div>说明: {{ keygenProgress.message }}</div>\r\n      <div>时间: {{ keygenProgress.timestamp }}</div>\r\n    </div>\r\n    <div style=\"margin-top: 16px;\">\r\n      <h3>输入协调器IP并获取状态</h3>\r\n      <input v-model=\"coordinatorIP\" placeholder=\"输入协调器IP\" />\r\n      <button @click=\"fetchCoordinatorStatus\">获取协调器状态</button>\r\n      <div v-if=\"coordinatorStatus\">\r\n        <pre>{{ coordinatorStatus }}</pre>\r\n      </div>\r\n    </div>\r\n    <div style=\"margin-top: 16px;\">\r\n      <h3>自身状态</h3>\r\n      <button @click=\"fetchSelfStatus\">查询</button>\r\n      <div v-if=\"selfStatus\">\r\n        <pre>{{ selfStatus }}</pre>\r\n      </div>\r\n    </div>\r\n    <div style=\"margin-top: 16px;\">\r\n      <h3>协同解密/刷新请求</h3>\r\n      <input v-model=\"ciphertext\" placeholder=\"密文 ciphertext\" style=\"width: 300px;\" />\r\n      <input v-model=\"targetParticipants\" placeholder=\"目标参与方ID,逗号分隔\" style=\"width: 180px;\" />\r\n      <button @click=\"collaborativeDecrypt\">协同解密</button>\r\n      <button @click=\"collaborativeRefresh\">协同刷新</button>\r\n      <div v-if=\"collabResp\">\r\n        <pre>{{ collabResp }}</pre>\r\n      </div>\r\n    </div>\r\n    <div style=\"margin-top: 16px;\">\r\n      <h3>在线状态查询</h3>\r\n      <button @click=\"fetchOnlineStatus\">查询</button>\r\n      <div v-if=\"onlineStatus\">\r\n        <pre>{{ onlineStatus }}</pre>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport axios from 'axios'\r\nimport {\r\n  getSelfStatus,\r\n  getOnlineStatus,\r\n  collaborativeDecrypt,\r\n  collaborativeRefresh\r\n} from './api/participant'\r\n\r\nconst ws = ref(null)\r\nconst wsStatus = ref('未连接')\r\nconst ipPush = ref(null)\r\nconst keygenProgress = ref(null)\r\nconst coordinatorIP = ref('')\r\nconst coordinatorStatus = ref('')\r\n\r\nfunction connectWS() {\r\n  if (ws.value) ws.value.close()\r\n  ws.value = new WebSocket('ws://localhost:8061/api/participant/ws')\r\n  ws.value.onopen = () => { wsStatus.value = '已连接' }\r\n  ws.value.onclose = () => { wsStatus.value = '已断开' }\r\n  ws.value.onerror = () => { wsStatus.value = '连接错误' }\r\n  ws.value.onmessage = (event) => {\r\n    const msg = JSON.parse(event.data)\r\n    if (msg.type === 'ip') {\r\n      ipPush.value = msg\r\n    } else if (msg.type === 'keygen_progress') {\r\n      keygenProgress.value = msg\r\n    }\r\n  }\r\n}\r\n\r\nasync function fetchCoordinatorStatus() {\r\n  if (!coordinatorIP.value) return\r\n  try {\r\n    const res = await axios.get(`http://${coordinatorIP.value}:8080/api/coordinator/status`)\r\n    coordinatorStatus.value = JSON.stringify(res.data, null, 2)\r\n  } catch (e) {\r\n    coordinatorStatus.value = '获取失败: ' + (e?.message || e)\r\n  }\r\n}\r\n\r\n// 自身状态\r\nconst selfStatus = ref('')\r\nasync function fetchSelfStatus() {\r\n  const res = await getSelfStatus()\r\n  selfStatus.value = JSON.stringify(res.data, null, 2)\r\n}\r\n\r\n// 协同解密/刷新\r\nconst ciphertext = ref('')\r\nconst targetParticipants = ref('')\r\nconst collabResp = ref('')\r\nasync function collaborativeDecrypt() {\r\n  const ids = targetParticipants.value.split(',').map(s => parseInt(s)).filter(Boolean)\r\n  const res = await collaborativeDecryptApi({\r\n    ciphertext: ciphertext.value,\r\n    target_participants: ids\r\n  })\r\n  collabResp.value = JSON.stringify(res.data, null, 2)\r\n}\r\nasync function collaborativeRefresh() {\r\n  const ids = targetParticipants.value.split(',').map(s => parseInt(s)).filter(Boolean)\r\n  const res = await collaborativeRefreshApi({\r\n    ciphertext: ciphertext.value,\r\n    target_participants: ids\r\n  })\r\n  collabResp.value = JSON.stringify(res.data, null, 2)\r\n}\r\n// 兼容导入\r\nconst collaborativeDecryptApi = collaborativeDecrypt\r\nconst collaborativeRefreshApi = collaborativeRefresh\r\n\r\n// 在线状态\r\nconst onlineStatus = ref('')\r\nasync function fetchOnlineStatus() {\r\n  const res = await getOnlineStatus()\r\n  onlineStatus.value = JSON.stringify(res.data, null, 2)\r\n}\r\n</script> "],"mappings":";;EACOA,KAAsD,EAAtD;IAAA;IAAA;IAAA;EAAA;AAAsD;;;;;;;;;;;EAkBpDA,KAAyB,EAAzB;IAAA;EAAA;AAAyB;;;;;EAQzBA,KAAyB,EAAzB;IAAA;EAAA;AAAyB;;;;;EAOzBA,KAAyB,EAAzB;IAAA;EAAA;AAAyB;;;;;EAUzBA,KAAyB,EAAzB;IAAA;EAAA;AAAyB;;;;;uBA3ChCC,mBAAA,CAkDM,OAlDNC,UAkDM,G,4BAjDJC,mBAAA,CAAyB,YAArB,kBAAgB,qBACpBA,mBAAA,CAIM,c,0BAHJA,mBAAA,CAAqC,cAA/B,0BAAwB,qBAC9BA,mBAAA,CAAsC;IAA7BC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,IAAA,CAAAC,SAAA,IAAAD,IAAA,CAAAC,SAAA,IAAAF,IAAA,CAAS;KAAE,IAAE,GACjBC,IAAA,CAAAE,QAAQ,I,cAApBR,mBAAA,CAA6C,QAAAS,UAAA,EAAvB,GAAC,GAAAC,gBAAA,CAAGJ,IAAA,CAAAE,QAAQ,IAAG,GAAC,mB,qCAE7BF,IAAA,CAAAK,MAAM,I,cAAjBX,mBAAA,CAGM,OAAAY,UAAA,G,4BAFJV,mBAAA,CAAe,YAAX,QAAM,qBACVA,mBAAA,CAAsD,aAAjD,MAAI,GAAAQ,gBAAA,CAAGJ,IAAA,CAAAK,MAAM,CAACE,EAAE,IAAG,SAAO,GAAAH,gBAAA,CAAGJ,IAAA,CAAAK,MAAM,CAACG,IAAI,iB,wCAEpCR,IAAA,CAAAS,cAAc,I,cAAzBf,mBAAA,CAMM,OAAAgB,UAAA,G,4BALJd,mBAAA,CAAe,YAAX,QAAM,qBACVA,mBAAA,CAAwC,aAAnC,MAAI,GAAAQ,gBAAA,CAAGJ,IAAA,CAAAS,cAAc,CAACE,IAAI,kBAC/Bf,mBAAA,CAA0C,aAArC,MAAI,GAAAQ,gBAAA,CAAGJ,IAAA,CAAAS,cAAc,CAACG,MAAM,kBACjChB,mBAAA,CAA2C,aAAtC,MAAI,GAAAQ,gBAAA,CAAGJ,IAAA,CAAAS,cAAc,CAACI,OAAO,kBAClCjB,mBAAA,CAA6C,aAAxC,MAAI,GAAAQ,gBAAA,CAAGJ,IAAA,CAAAS,cAAc,CAACK,SAAS,iB,wCAEtClB,mBAAA,CAOM,OAPNmB,UAOM,G,4BANJnB,mBAAA,CAAqB,YAAjB,cAAY,qB,gBAChBA,mBAAA,CAAuD;+DAAvCI,IAAA,CAAAgB,aAAa,GAAAC,MAAA;IAAEC,WAAW,EAAC;iDAA3BlB,IAAA,CAAAgB,aAAa,E,GAC7BpB,mBAAA,CAAwD;IAA/CC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,IAAA,CAAAmB,sBAAA,IAAAnB,IAAA,CAAAmB,sBAAA,IAAApB,IAAA,CAAsB;KAAE,SAAO,GACpCC,IAAA,CAAAoB,iBAAiB,I,cAA5B1B,mBAAA,CAEM,OAAA2B,UAAA,GADJzB,mBAAA,CAAkC,aAAAQ,gBAAA,CAA1BJ,IAAA,CAAAoB,iBAAiB,iB,0CAG7BxB,mBAAA,CAMM,OANN0B,UAMM,G,4BALJ1B,mBAAA,CAAa,YAAT,MAAI,qBACRA,mBAAA,CAA4C;IAAnCC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,IAAA,CAAAuB,eAAA,IAAAvB,IAAA,CAAAuB,eAAA,IAAAxB,IAAA,CAAe;KAAE,IAAE,GACxBC,IAAA,CAAAwB,UAAU,I,cAArB9B,mBAAA,CAEM,OAAA+B,UAAA,GADJ7B,mBAAA,CAA2B,aAAAQ,gBAAA,CAAnBJ,IAAA,CAAAwB,UAAU,iB,0CAGtB5B,mBAAA,CASM,OATN8B,UASM,G,4BARJ9B,mBAAA,CAAkB,YAAd,WAAS,qB,gBACbA,mBAAA,CAAgF;+DAAhEI,IAAA,CAAA2B,UAAU,GAAAV,MAAA;IAAEC,WAAW,EAAC,eAAe;IAACzB,KAAqB,EAArB;MAAA;IAAA;iDAAxCO,IAAA,CAAA2B,UAAU,E,mBAC1B/B,mBAAA,CAAuF;+DAAvEI,IAAA,CAAA4B,kBAAkB,GAAAX,MAAA;IAAEC,WAAW,EAAC,cAAc;IAACzB,KAAqB,EAArB;MAAA;IAAA;iDAA/CO,IAAA,CAAA4B,kBAAkB,E,GAClChC,mBAAA,CAAmD;IAA1CC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,IAAA,CAAA6B,oBAAA,IAAA7B,IAAA,CAAA6B,oBAAA,IAAA9B,IAAA,CAAoB;KAAE,MAAI,GAC1CH,mBAAA,CAAmD;IAA1CC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,IAAA,CAAA8B,oBAAA,IAAA9B,IAAA,CAAA8B,oBAAA,IAAA/B,IAAA,CAAoB;KAAE,MAAI,GAC/BC,IAAA,CAAA+B,UAAU,I,cAArBrC,mBAAA,CAEM,OAAAsC,WAAA,GADJpC,mBAAA,CAA2B,aAAAQ,gBAAA,CAAnBJ,IAAA,CAAA+B,UAAU,iB,0CAGtBnC,mBAAA,CAMM,OANNqC,WAMM,G,4BALJrC,mBAAA,CAAe,YAAX,QAAM,qBACVA,mBAAA,CAA8C;IAArCC,OAAK,EAAAC,MAAA,QAAAA,MAAA,UAAAC,IAAA,KAAEC,IAAA,CAAAkC,iBAAA,IAAAlC,IAAA,CAAAkC,iBAAA,IAAAnC,IAAA,CAAiB;KAAE,IAAE,GAC1BC,IAAA,CAAAmC,YAAY,I,cAAvBzC,mBAAA,CAEM,OAAA0C,WAAA,GADJxC,mBAAA,CAA6B,aAAAQ,gBAAA,CAArBJ,IAAA,CAAAmC,YAAY,iB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}