{"ast":null,"code":"import ParticipantStatus from '../components/ParticipantStatus.vue';\nimport KeyGenProgress from '../components/KeyGenProgress.vue';\nimport CoordinatorIPInput from '../components/CoordinatorIPInput.vue';\nimport { provide, ref, onMounted, onUnmounted } from 'vue';\nexport default {\n  __name: 'ParticipantDashboard',\n  setup(__props, {\n    expose: __expose\n  }) {\n    __expose();\n    const ws = ref(null);\n    provide('ws', ws);\n    const keyGenProgressRef = ref(null);\n    onMounted(() => {\n      ws.value = new WebSocket('ws://26.100.135.52:8081/api/participant/ws');\n      ws.value.onopen = () => {\n        console.log('WebSocket 连接已建立');\n      };\n      ws.value.onmessage = event => {\n        const msg = JSON.parse(event.data);\n        if (msg.type === 'keygen_progress' && keyGenProgressRef.value) {\n          keyGenProgressRef.value.handleKeyGenProgress(msg);\n        }\n        // 处理后端推送的消息，比如密钥进度、IP等\n        console.log('收到消息', msg);\n      };\n      ws.value.onclose = () => {\n        console.log('WebSocket 连接已关闭');\n      };\n      ws.value.onerror = err => {\n        console.error('WebSocket 错误', err);\n      };\n    });\n    onUnmounted(() => {\n      if (ws.value) ws.value.close();\n    });\n    const __returned__ = {\n      ws,\n      keyGenProgressRef,\n      ParticipantStatus,\n      KeyGenProgress,\n      CoordinatorIPInput,\n      provide,\n      ref,\n      onMounted,\n      onUnmounted\n    };\n    Object.defineProperty(__returned__, '__isScriptSetup', {\n      enumerable: false,\n      value: true\n    });\n    return __returned__;\n  }\n};","map":{"version":3,"names":["ParticipantStatus","KeyGenProgress","CoordinatorIPInput","provide","ref","onMounted","onUnmounted","ws","keyGenProgressRef","value","WebSocket","onopen","console","log","onmessage","event","msg","JSON","parse","data","type","handleKeyGenProgress","onclose","onerror","err","error","close"],"sources":["D:/down/MPHEDEV/encryption_par/src/views/ParticipantDashboard.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <ParticipantStatus />\r\n    <KeyGenProgress ref=\"keyGenProgressRef\" />\r\n    <CoordinatorIPInput />\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport ParticipantStatus from '../components/ParticipantStatus.vue'\r\nimport KeyGenProgress from '../components/KeyGenProgress.vue'\r\nimport CoordinatorIPInput from '../components/CoordinatorIPInput.vue'\r\nimport { provide, ref, onMounted, onUnmounted } from 'vue'\r\n\r\nconst ws = ref(null)\r\nprovide('ws', ws)\r\n\r\nconst keyGenProgressRef = ref(null)\r\n\r\nonMounted(() => {\r\n  ws.value = new WebSocket('ws://26.100.135.52:8081/api/participant/ws')\r\n  ws.value.onopen = () => {\r\n    console.log('WebSocket 连接已建立')\r\n  }\r\n  ws.value.onmessage = (event) => {\r\n    const msg = JSON.parse(event.data)\r\n    if (msg.type === 'keygen_progress' && keyGenProgressRef.value) {\r\n      keyGenProgressRef.value.handleKeyGenProgress(msg)\r\n    }\r\n    // 处理后端推送的消息，比如密钥进度、IP等\r\n    console.log('收到消息', msg)\r\n  }\r\n  ws.value.onclose = () => {\r\n    console.log('WebSocket 连接已关闭')\r\n  }\r\n  ws.value.onerror = (err) => {\r\n    console.error('WebSocket 错误', err)\r\n  }\r\n})\r\n\r\nonUnmounted(() => {\r\n  if (ws.value) ws.value.close()\r\n})\r\n</script>\r\n"],"mappings":"AAQA,OAAOA,iBAAiB,MAAM,qCAAqC;AACnE,OAAOC,cAAc,MAAM,kCAAkC;AAC7D,OAAOC,kBAAkB,MAAM,sCAAsC;AACrE,SAASC,OAAO,EAAEC,GAAG,EAAEC,SAAS,EAAEC,WAAW,QAAQ,KAAK;;;;;;;IAE1D,MAAMC,EAAE,GAAGH,GAAG,CAAC,IAAI,CAAC;IACpBD,OAAO,CAAC,IAAI,EAAEI,EAAE,CAAC;IAEjB,MAAMC,iBAAiB,GAAGJ,GAAG,CAAC,IAAI,CAAC;IAEnCC,SAAS,CAAC,MAAM;MACdE,EAAE,CAACE,KAAK,GAAG,IAAIC,SAAS,CAAC,4CAA4C,CAAC;MACtEH,EAAE,CAACE,KAAK,CAACE,MAAM,GAAG,MAAM;QACtBC,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;MAChC,CAAC;MACDN,EAAE,CAACE,KAAK,CAACK,SAAS,GAAIC,KAAK,IAAK;QAC9B,MAAMC,GAAG,GAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACI,IAAI,CAAC;QAClC,IAAIH,GAAG,CAACI,IAAI,KAAK,iBAAiB,IAAIZ,iBAAiB,CAACC,KAAK,EAAE;UAC7DD,iBAAiB,CAACC,KAAK,CAACY,oBAAoB,CAACL,GAAG,CAAC;QACnD;QACA;QACAJ,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEG,GAAG,CAAC;MAC1B,CAAC;MACDT,EAAE,CAACE,KAAK,CAACa,OAAO,GAAG,MAAM;QACvBV,OAAO,CAACC,GAAG,CAAC,iBAAiB,CAAC;MAChC,CAAC;MACDN,EAAE,CAACE,KAAK,CAACc,OAAO,GAAIC,GAAG,IAAK;QAC1BZ,OAAO,CAACa,KAAK,CAAC,cAAc,EAAED,GAAG,CAAC;MACpC,CAAC;IACH,CAAC,CAAC;IAEFlB,WAAW,CAAC,MAAM;MAChB,IAAIC,EAAE,CAACE,KAAK,EAAEF,EAAE,CAACE,KAAK,CAACiB,KAAK,CAAC,CAAC;IAChC,CAAC,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}