{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, openBlock as _openBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  id: \"app\"\n};\nconst _hoisted_2 = {\n  class: \"main-navbar\"\n};\nconst _hoisted_3 = {\n  class: \"navbar-container\"\n};\nconst _hoisted_4 = {\n  class: \"nav-menu\"\n};\nconst _hoisted_5 = {\n  class: \"main-content\"\n};\nexport function render(_ctx, _cache) {\n  const _component_router_link = _resolveComponent(\"router-link\");\n  const _component_router_view = _resolveComponent(\"router-view\");\n  return _openBlock(), _createElementBlock(\"div\", _hoisted_1, [_createElementVNode(\"header\", _hoisted_2, [_createElementVNode(\"div\", _hoisted_3, [_cache[4] || (_cache[4] = _createElementVNode(\"div\", {\n    class: \"logo\"\n  }, \"MPHEDEV-Participant\", -1 /* CACHED */)), _createElementVNode(\"nav\", _hoisted_4, [_createVNode(_component_router_link, {\n    to: \"/\",\n    exact: \"\"\n  }, {\n    default: _withCtx(() => _cache[0] || (_cache[0] = [_createTextVNode(\"首页\")])),\n    _: 1 /* STABLE */,\n    __: [0]\n  }), _createVNode(_component_router_link, {\n    to: \"/status\"\n  }, {\n    default: _withCtx(() => _cache[1] || (_cache[1] = [_createTextVNode(\"参与方状态\")])),\n    _: 1 /* STABLE */,\n    __: [1]\n  }), _createVNode(_component_router_link, {\n    to: \"/online\"\n  }, {\n    default: _withCtx(() => _cache[2] || (_cache[2] = [_createTextVNode(\"在线状态\")])),\n    _: 1 /* STABLE */,\n    __: [2]\n  }), _createVNode(_component_router_link, {\n    to: \"/decrypt\"\n  }, {\n    default: _withCtx(() => _cache[3] || (_cache[3] = [_createTextVNode(\"协同解密\")])),\n    _: 1 /* STABLE */,\n    __: [3]\n  })])])]), _createElementVNode(\"main\", _hoisted_5, [_createVNode(_component_router_view)])]);\n}","map":{"version":3,"names":["id","class","_createElementBlock","_hoisted_1","_createElementVNode","_hoisted_2","_hoisted_3","_hoisted_4","_createVNode","_component_router_link","to","exact","_cache","_hoisted_5","_component_router_view"],"sources":["D:\\down\\MPHEDEV\\encryption_par\\src\\App.vue"],"sourcesContent":["<template>\n  <div id=\"app\">\n    <header class=\"main-navbar\">\n      <div class=\"navbar-container\">\n        <div class=\"logo\">MPHEDEV-Participant</div>\n        <nav class=\"nav-menu\">\n          <router-link to=\"/\" exact>首页</router-link>\n          <router-link to=\"/status\">参与方状态</router-link>\n          <router-link to=\"/online\">在线状态</router-link>\n          <router-link to=\"/decrypt\">协同解密</router-link>\n        </nav>\n      </div>\n    </header>\n    <main class=\"main-content\">\n      <router-view />\n    </main>\n  </div>\n</template>\n\n<script setup>\nimport { ref } from 'vue'\nimport {\n  getSelfStatus,\n  getOnlineStatus,\n  collaborativeDecrypt,\n  collaborativeRefresh\n} from './api/participant'\n\nconst ws = ref(null)\nconst wsStatus = ref('未连接')\nconst ipPush = ref(null)\nconst keygenProgress = ref(null)\nconst coordinatorIP = ref('')\n\nfunction connectWS() {\n  if (ws.value) ws.value.close()\n  ws.value = new WebSocket('ws://localhost:8061/api/participant/ws')\n  ws.value.onopen = () => { wsStatus.value = '已连接' }\n  ws.value.onclose = () => { wsStatus.value = '已断开' }\n  ws.value.onerror = () => { wsStatus.value = '连接错误' }\n  ws.value.onmessage = (event) => {\n    const msg = JSON.parse(event.data)\n    if (msg.type === 'ip') {\n      ipPush.value = msg\n    } else if (msg.type === 'keygen_progress') {\n      keygenProgress.value = msg\n    }\n  }\n}\n\nfunction sendCoordinatorIP() {\n  if (ws.value && ws.value.readyState === 1) {\n    ws.value.send(JSON.stringify({\n      type: 'coordinator_ip',\n      coordinator_ip: coordinatorIP.value\n    }))\n  }\n}\n\n// 自身状态\nconst selfStatus = ref('')\nasync function fetchSelfStatus() {\n  const res = await getSelfStatus()\n  selfStatus.value = JSON.stringify(res.data, null, 2)\n}\n\n// 协同解密/刷新\nconst ciphertext = ref('')\nconst targetParticipants = ref('')\nconst collabResp = ref('')\nasync function collaborativeDecrypt() {\n  const ids = targetParticipants.value.split(',').map(s => parseInt(s)).filter(Boolean)\n  const res = await collaborativeDecryptApi({\n    ciphertext: ciphertext.value,\n    target_participants: ids\n  })\n  collabResp.value = JSON.stringify(res.data, null, 2)\n}\nasync function collaborativeRefresh() {\n  const ids = targetParticipants.value.split(',').map(s => parseInt(s)).filter(Boolean)\n  const res = await collaborativeRefreshApi({\n    ciphertext: ciphertext.value,\n    target_participants: ids\n  })\n  collabResp.value = JSON.stringify(res.data, null, 2)\n}\n// 兼容导入\nconst collaborativeDecryptApi = collaborativeDecrypt\nconst collaborativeRefreshApi = collaborativeRefresh\n\n// 在线状态\nconst onlineStatus = ref('')\nasync function fetchOnlineStatus() {\n  const res = await getOnlineStatus()\n  onlineStatus.value = JSON.stringify(res.data, null, 2)\n}\n</script>\n\n<style scoped>\n/* 可参考 MPHDevFrontEnd/src/App.vue 的样式 */\n#app {\n  min-height: 100vh;\n  background: #f7fafc;\n  font-family: 'Montserrat', 'Segoe UI', Arial, sans-serif;\n}\n.main-navbar {\n  width: 100%;\n  height: 64px;\n  background: #fff;\n  box-shadow: 0 2px 12px 0 #e3e8f0;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n  position: sticky;\n  top: 0;\n  z-index: 100;\n}\n.navbar-container {\n  width: 100%;\n  max-width: 1400px;\n  padding: 0 48px;\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n}\n.logo {\n  font-size: 1.5rem;\n  font-weight: 800;\n  color: #2563eb;\n  letter-spacing: 0.08em;\n}\n.nav-menu {\n  display: flex;\n  gap: 32px;\n  flex-wrap: wrap;\n  overflow: visible;\n}\n.nav-menu a {\n  color: #2563eb;\n  background: #f1f5f9;\n  border-radius: 20px;\n  padding: 7px 28px;\n  font-size: 1rem;\n  font-weight: 600;\n  text-decoration: none;\n  transition: background 0.2s, color 0.2s, box-shadow 0.2s;\n  box-shadow: 0 0 0 #2563eb00;\n}\n.nav-menu a.router-link-exact-active, .nav-menu a:hover {\n  background: #2563eb;\n  color: #fff;\n  box-shadow: 0 2px 8px 0 #2563eb33;\n}\n.main-content {\n  max-width: 1400px;\n  margin: 48px auto 0 auto;\n  padding: 48px 48px 64px 48px;\n  background: #fff;\n  border-radius: 18px;\n  box-shadow: 0 4px 32px 0 #e3e8f0;\n  min-height: 500px;\n}\n</style> "],"mappings":";;EACOA,EAAE,EAAC;AAAK;;EACHC,KAAK,EAAC;AAAa;;EACpBA,KAAK,EAAC;AAAkB;;EAEtBA,KAAK,EAAC;AAAU;;EAQnBA,KAAK,EAAC;AAAc;;;;uBAZ5BC,mBAAA,CAeM,OAfNC,UAeM,GAdJC,mBAAA,CAUS,UAVTC,UAUS,GATPD,mBAAA,CAQM,OARNE,UAQM,G,0BAPJF,mBAAA,CAA2C;IAAtCH,KAAK,EAAC;EAAM,GAAC,qBAAmB,qBACrCG,mBAAA,CAKM,OALNG,UAKM,GAJJC,YAAA,CAA0CC,sBAAA;IAA7BC,EAAE,EAAC,GAAG;IAACC,KAAK,EAAL;;sBAAM,MAAEC,MAAA,QAAAA,MAAA,O,iBAAF,IAAE,E;;;MAC5BJ,YAAA,CAA6CC,sBAAA;IAAhCC,EAAE,EAAC;EAAS;sBAAC,MAAKE,MAAA,QAAAA,MAAA,O,iBAAL,OAAK,E;;;MAC/BJ,YAAA,CAA4CC,sBAAA;IAA/BC,EAAE,EAAC;EAAS;sBAAC,MAAIE,MAAA,QAAAA,MAAA,O,iBAAJ,MAAI,E;;;MAC9BJ,YAAA,CAA6CC,sBAAA;IAAhCC,EAAE,EAAC;EAAU;sBAAC,MAAIE,MAAA,QAAAA,MAAA,O,iBAAJ,MAAI,E;;;YAIrCR,mBAAA,CAEO,QAFPS,UAEO,GADLL,YAAA,CAAeM,sBAAA,E","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}