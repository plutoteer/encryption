{"ast":null,"code":"import { createElementVNode as _createElementVNode, vModelText as _vModelText, withDirectives as _withDirectives, toDisplayString as _toDisplayString, openBlock as _openBlock, createElementBlock as _createElementBlock, createCommentVNode as _createCommentVNode } from \"vue\";\nconst _hoisted_1 = {\n  style: {\n    \"margin-bottom\": \"16px\"\n  }\n};\nconst _hoisted_2 = {\n  key: 0\n};\nconst _hoisted_3 = {\n  style: {\n    \"margin-bottom\": \"16px\"\n  }\n};\nconst _hoisted_4 = {\n  key: 0\n};\nconst _hoisted_5 = {\n  style: {\n    \"margin-bottom\": \"16px\"\n  }\n};\nconst _hoisted_6 = {\n  key: 0\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  return _openBlock(), _createElementBlock(\"div\", null, [_cache[2] || (_cache[2] = _createElementVNode(\"h2\", null, \"参与方首页\", -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_1, [_cache[1] || (_cache[1] = _createElementVNode(\"label\", null, \"协调器IP: \", -1 /* CACHED */)), _withDirectives(_createElementVNode(\"input\", {\n    \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.coordinatorIP = $event),\n    placeholder: \"输入协调器IP\",\n    style: {\n      \"width\": \"180px\"\n    }\n  }, null, 512 /* NEED_PATCH */), [[_vModelText, $setup.coordinatorIP]]), _createElementVNode(\"button\", {\n    onClick: $setup.sendCoordinatorIP\n  }, \"发送协调器IP\"), $setup.coordinatorPushMsg ? (_openBlock(), _createElementBlock(\"span\", _hoisted_2, _toDisplayString($setup.coordinatorPushMsg), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_3, [_createElementVNode(\"button\", {\n    onClick: $setup.fetchSelfStatus\n  }, \"查询自身状态\"), $setup.selfStatus ? (_openBlock(), _createElementBlock(\"span\", _hoisted_4, [_createElementVNode(\"pre\", null, _toDisplayString($setup.selfStatus), 1 /* TEXT */)])) : _createCommentVNode(\"v-if\", true)]), _createElementVNode(\"div\", _hoisted_5, [_createElementVNode(\"button\", {\n    onClick: $setup.requestUnregister\n  }, \"申请退出\"), $setup.unregisterMsg ? (_openBlock(), _createElementBlock(\"span\", _hoisted_6, _toDisplayString($setup.unregisterMsg), 1 /* TEXT */)) : _createCommentVNode(\"v-if\", true)])]);\n}","map":{"version":3,"names":["style","_createElementBlock","_createElementVNode","_hoisted_1","$setup","coordinatorIP","$event","placeholder","onClick","sendCoordinatorIP","coordinatorPushMsg","_hoisted_2","_toDisplayString","_hoisted_3","fetchSelfStatus","selfStatus","_hoisted_4","_hoisted_5","requestUnregister","unregisterMsg","_hoisted_6"],"sources":["D:\\down\\MPHEDEV\\encryption_par\\src\\views\\Home.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h2>参与方首页</h2>\r\n    <div style=\"margin-bottom: 16px;\">\r\n      <label>协调器IP: </label>\r\n      <input v-model=\"coordinatorIP\" placeholder=\"输入协调器IP\" style=\"width: 180px;\" />\r\n      <button @click=\"sendCoordinatorIP\">发送协调器IP</button>\r\n      <span v-if=\"coordinatorPushMsg\">{{ coordinatorPushMsg }}</span>\r\n    </div>\r\n    <div style=\"margin-bottom: 16px;\">\r\n      <button @click=\"fetchSelfStatus\">查询自身状态</button>\r\n      <span v-if=\"selfStatus\"><pre>{{ selfStatus }}</pre></span>\r\n    </div>\r\n    <div style=\"margin-bottom: 16px;\">\r\n      <button @click=\"requestUnregister\">申请退出</button>\r\n      <span v-if=\"unregisterMsg\">{{ unregisterMsg }}</span>\r\n    </div>\r\n  </div>\r\n</template>\r\n<script setup>\r\nimport { ref } from 'vue'\r\nimport axios from 'axios'\r\n\r\nconst coordinatorIP = ref('')\r\nconst coordinatorPushMsg = ref('')\r\nconst selfStatus = ref('')\r\nconst unregisterMsg = ref('')\r\nlet ws = null\r\n\r\nasync function sendCoordinatorIP() {\r\n  try {\r\n    await axios.post('/api/participant/set-coordinator-ip', { coordinator_ip: coordinatorIP.value })\r\n    coordinatorPushMsg.value = '协调器IP已发送'\r\n  } catch (e) {\r\n    coordinatorPushMsg.value = '发送失败'\r\n  }\r\n}\r\nasync function fetchSelfStatus() {\r\n  try {\r\n    const res = await axios.get('/api/participant/status')\r\n    selfStatus.value = JSON.stringify(res.data, null, 2)\r\n  } catch (e) {\r\n    selfStatus.value = '查询失败'\r\n  }\r\n}\r\nfunction requestUnregister() {\r\n  if (!ws || ws.readyState !== 1) {\r\n    ws = new WebSocket('ws://localhost:8061/api/participant/ws')\r\n    ws.onopen = () => {\r\n      ws.send(JSON.stringify({ type: 'unregister' }))\r\n      unregisterMsg.value = '已发送注销请求'\r\n    }\r\n    ws.onerror = () => {\r\n      unregisterMsg.value = 'WebSocket 连接失败'\r\n    }\r\n  } else {\r\n    ws.send(JSON.stringify({ type: 'unregister' }))\r\n    unregisterMsg.value = '已发送注销请求'\r\n  }\r\n}\r\n</script>\r\n<script>\r\nexport default {\r\n  name: 'HomePage',\r\n}\r\n</script> "],"mappings":";;EAGSA,KAA4B,EAA5B;IAAA;EAAA;AAA4B;;;;;EAM5BA,KAA4B,EAA5B;IAAA;EAAA;AAA4B;;;;;EAI5BA,KAA4B,EAA5B;IAAA;EAAA;AAA4B;;;;;uBAZnCC,mBAAA,CAgBM,c,0BAfJC,mBAAA,CAAc,YAAV,OAAK,qBACTA,mBAAA,CAKM,OALNC,UAKM,G,0BAJJD,mBAAA,CAAsB,eAAf,SAAO,qB,gBACdA,mBAAA,CAA6E;+DAA7DE,MAAA,CAAAC,aAAa,GAAAC,MAAA;IAAEC,WAAW,EAAC,SAAS;IAACP,KAAqB,EAArB;MAAA;IAAA;iDAArCI,MAAA,CAAAC,aAAa,E,GAC7BH,mBAAA,CAAmD;IAA1CM,OAAK,EAAEJ,MAAA,CAAAK;EAAiB,GAAE,SAAO,GAC9BL,MAAA,CAAAM,kBAAkB,I,cAA9BT,mBAAA,CAA+D,QAAAU,UAAA,EAAAC,gBAAA,CAA5BR,MAAA,CAAAM,kBAAkB,oB,qCAEvDR,mBAAA,CAGM,OAHNW,UAGM,GAFJX,mBAAA,CAAgD;IAAvCM,OAAK,EAAEJ,MAAA,CAAAU;EAAe,GAAE,QAAM,GAC3BV,MAAA,CAAAW,UAAU,I,cAAtBd,mBAAA,CAA0D,QAAAe,UAAA,GAAlCd,mBAAA,CAA2B,aAAAU,gBAAA,CAAnBR,MAAA,CAAAW,UAAU,iB,0CAE5Cb,mBAAA,CAGM,OAHNe,UAGM,GAFJf,mBAAA,CAAgD;IAAvCM,OAAK,EAAEJ,MAAA,CAAAc;EAAiB,GAAE,MAAI,GAC3Bd,MAAA,CAAAe,aAAa,I,cAAzBlB,mBAAA,CAAqD,QAAAmB,UAAA,EAAAR,gBAAA,CAAvBR,MAAA,CAAAe,aAAa,oB","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}